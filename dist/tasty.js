!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("paper")):"function"==typeof define&&define.amd?define("tasty",["paper"],e):"object"==typeof exports?exports.tasty=e(require("paper")):t.tasty=e(t.paper)}(this,(function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=133)}([function(t,e,n){var i=n(23),o="object"==typeof self&&self&&self.Object===Object&&self,r=i||o||Function("return this")();t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var i=n(54),o=n(60);t.exports=function(t,e){var n=o(t,e);return i(n)?n:void 0}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var i=n(15),o=n(56),r=n(57),s=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?o(t):r(t)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(44),o=n(45),r=n(46),s=n(47),a=n(48);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=r,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var i=n(6);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){var i=n(2)(Object,"create");t.exports=i},function(t,e,n){var i=n(69);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(14),o=n(32);t.exports=function(t){return null!=t&&o(t.length)&&!i(t)}},function(e,n){e.exports=t},function(t,e,n){var i=n(2)(n(0),"Map");t.exports=i},function(t,e,n){var i=n(4),o=n(1);t.exports=function(t){if(!o(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var i=n(0).Symbol;t.exports=i},function(t,e,n){var i=n(27);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){(function(t){var i=n(0),o=n(84),r=e&&!e.nodeType&&e,s=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===r?i.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;t.exports=c}).call(this,n(17)(t))},function(t,e,n){var i=n(86),o=n(87),r=n(88),s=r&&r.isTypedArray,a=s?o(s):i;t.exports=a},,function(t,e,n){var i=n(7),o=n(49),r=n(50),s=n(51),a=n(52),c=n(53);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=o,u.prototype.delete=r,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,t.exports=u},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(55))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(61),o=n(68),r=n(70),s=n(71),a=n(72);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=r,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var i=n(16),o=n(6);t.exports=function(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var i=n(2),o=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var i=n(0).Uint8Array;t.exports=i},function(t,e,n){var i=n(30)(Object.getPrototypeOf,Object);t.exports=i},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(82),o=n(3),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var i=n(35),o=n(93),r=n(11);t.exports=function(t){return r(t)?i(t,!0):o(t)}},function(t,e,n){var i=n(92),o=n(31),r=n(5),s=n(19),a=n(36),c=n(20),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=r(t),h=!n&&o(t),l=!n&&!h&&s(t),f=!n&&!h&&!l&&c(t),p=n||h||l||f,d=p?i(t.length,String):[],v=d.length;for(var b in t)!e&&!u.call(t,b)||p&&("length"==b||l&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||a(b,v))||d.push(b);return d}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(106),o=n(109),r=n(110);t.exports=function(t,e,n,s,a,c){var u=1&n,h=t.length,l=e.length;if(h!=l&&!(u&&l>h))return!1;var f=c.get(t);if(f&&c.get(e))return f==e;var p=-1,d=!0,v=2&n?new i:void 0;for(c.set(t,e),c.set(e,t);++p<h;){var b=t[p],y=e[p];if(s)var g=u?s(y,b,p,e,t,c):s(b,y,p,t,e,c);if(void 0!==g){if(g)continue;d=!1;break}if(v){if(!o(e,(function(t,e){if(!r(v,e)&&(b===t||a(b,t,n,s,c)))return v.push(e)}))){d=!1;break}}else if(b!==y&&!a(b,y,n,s,c)){d=!1;break}}return c.delete(t),c.delete(e),d}},function(t,e,n){var i=n(43),o=n(95)((function(t,e,n,o){i(t,e,n,o)}));t.exports=o},function(t,e,n){var i=n(104);t.exports=function(t,e){return i(t,e)}},function(t,e,n){var i=n(129),o=n(1);t.exports=function(t,e,n){var r=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(t,e,{leading:r,maxWait:e,trailing:s})}},,function(t,e,n){var i=n(22),o=n(26),r=n(73),s=n(75),a=n(1),c=n(34),u=n(33);t.exports=function t(e,n,h,l,f){e!==n&&r(n,(function(r,c){if(f||(f=new i),a(r))s(e,n,c,h,t,l,f);else{var p=l?l(u(e,c),r,c+"",e,n,f):void 0;void 0===p&&(p=r),o(e,c,p)}}),c)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(8),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var i=n(8);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(8);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(8);t.exports=function(t,e){var n=this.__data__,o=i(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var i=n(7);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(7),o=n(13),r=n(25);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!o||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new r(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(14),o=n(58),r=n(1),s=n(24),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,l=u.hasOwnProperty,f=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||o(t))&&(i(t)?f:a).test(s(t))}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(15),o=Object.prototype,r=o.hasOwnProperty,s=o.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=r.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var o=s.call(t);return i&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var i,o=n(59),r=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!r&&r in t}},function(t,e,n){var i=n(0)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(62),o=n(7),r=n(13);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(r||o),string:new i}}},function(t,e,n){var i=n(63),o=n(64),r=n(65),s=n(66),a=n(67);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=r,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var i=n(9);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(9),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(9),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var i=n(9);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var i=n(10);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(10);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(10);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(10);t.exports=function(t,e){var n=i(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var i=n(74)();t.exports=i},function(t,e){t.exports=function(t){return function(e,n,i){for(var o=-1,r=Object(e),s=i(e),a=s.length;a--;){var c=s[t?a:++o];if(!1===n(r[c],c,r))break}return e}}},function(t,e,n){var i=n(26),o=n(76),r=n(77),s=n(79),a=n(80),c=n(31),u=n(5),h=n(83),l=n(19),f=n(14),p=n(1),d=n(85),v=n(20),b=n(33),y=n(89);t.exports=function(t,e,n,g,m,_,w){var C=b(t,n),E=b(e,n),S=w.get(E);if(S)i(t,n,S);else{var k=_?_(C,E,n+"",t,e,w):void 0,O=void 0===k;if(O){var I=u(E),x=!I&&l(E),A=!I&&!x&&v(E);k=E,I||x||A?u(C)?k=C:h(C)?k=s(C):x?(O=!1,k=o(E,!0)):A?(O=!1,k=r(E,!0)):k=[]:d(E)||c(E)?(k=C,c(C)?k=y(C):p(C)&&!f(C)||(k=a(E))):O=!1}O&&(w.set(E,k),m(k,E,g,_,w),w.delete(E)),i(t,n,k)}}},function(t,e,n){(function(t){var i=n(0),o=e&&!e.nodeType&&e,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=r&&r.exports===o?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}}).call(this,n(17)(t))},function(t,e,n){var i=n(78);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var i=n(28);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},function(t,e){t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},function(t,e,n){var i=n(81),o=n(29),r=n(18);t.exports=function(t){return"function"!=typeof t.constructor||r(t)?{}:i(o(t))}},function(t,e,n){var i=n(1),o=Object.create,r=function(){function t(){}return function(e){if(!i(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=r},function(t,e,n){var i=n(4),o=n(3);t.exports=function(t){return o(t)&&"[object Arguments]"==i(t)}},function(t,e,n){var i=n(11),o=n(3);t.exports=function(t){return o(t)&&i(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(4),o=n(29),r=n(3),s=Function.prototype,a=Object.prototype,c=s.toString,u=a.hasOwnProperty,h=c.call(Object);t.exports=function(t){if(!r(t)||"[object Object]"!=i(t))return!1;var e=o(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}},function(t,e,n){var i=n(4),o=n(32),r=n(3),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&o(t.length)&&!!s[i(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(23),o=e&&!e.nodeType&&e,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=r&&r.exports===o&&i.process,a=function(){try{var t=r&&r.require&&r.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(17)(t))},function(t,e,n){var i=n(90),o=n(34);t.exports=function(t){return i(t,o(t))}},function(t,e,n){var i=n(91),o=n(16);t.exports=function(t,e,n,r){var s=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],h=r?r(n[u],t[u],u,n,t):void 0;void 0===h&&(h=t[u]),s?o(n,u,h):i(n,u,h)}return n}},function(t,e,n){var i=n(16),o=n(6),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];r.call(t,e)&&o(s,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(1),o=n(18),r=n(94),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=o(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var i=n(96),o=n(103);t.exports=function(t){return i((function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(r--,s):void 0,a&&o(n[0],n[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var c=n[i];c&&t(e,c,i,s)}return e}))}},function(t,e,n){var i=n(37),o=n(97),r=n(99);t.exports=function(t,e){return r(o(t,e,i),t+"")}},function(t,e,n){var i=n(98),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=o(r.length-e,0),c=Array(a);++s<a;)c[s]=r[e+s];s=-1;for(var u=Array(e+1);++s<e;)u[s]=r[s];return u[e]=n(c),i(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(100),o=n(102)(i);t.exports=o},function(t,e,n){var i=n(101),o=n(27),r=n(37),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:r;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,i=0;return function(){var o=n(),r=16-(o-i);if(i=o,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var i=n(6),o=n(11),r=n(36),s=n(1);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?o(n)&&r(e,n.length):"string"==a&&e in n)&&i(n[e],t)}},function(t,e,n){var i=n(105),o=n(3);t.exports=function t(e,n,r,s,a){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:i(e,n,r,s,t,a))}},function(t,e,n){var i=n(22),o=n(38),r=n(111),s=n(114),a=n(124),c=n(5),u=n(19),h=n(20),l="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,v){var b=c(t),y=c(e),g=b?"[object Array]":a(t),m=y?"[object Array]":a(e),_=(g="[object Arguments]"==g?l:g)==l,w=(m="[object Arguments]"==m?l:m)==l,C=g==m;if(C&&u(t)){if(!u(e))return!1;b=!0,_=!1}if(C&&!_)return v||(v=new i),b||h(t)?o(t,e,n,p,d,v):r(t,e,g,n,p,d,v);if(!(1&n)){var E=_&&f.call(t,"__wrapped__"),S=w&&f.call(e,"__wrapped__");if(E||S){var k=E?t.value():t,O=S?e.value():e;return v||(v=new i),d(k,O,n,p,v)}}return!!C&&(v||(v=new i),s(t,e,n,p,d,v))}},function(t,e,n){var i=n(25),o=n(107),r=n(108);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=r,t.exports=s},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(15),o=n(28),r=n(6),s=n(38),a=n(112),c=n(113),u=i?i.prototype:void 0,h=u?u.valueOf:void 0;t.exports=function(t,e,n,i,u,l,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=a;case"[object Set]":var d=1&i;if(p||(p=c),t.size!=e.size&&!d)return!1;var v=f.get(t);if(v)return v==e;i|=2,f.set(t,e);var b=s(p(t),p(e),i,u,l,f);return f.delete(t),b;case"[object Symbol]":if(h)return h.call(t)==h.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var i=n(115),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,s,a){var c=1&n,u=i(t),h=u.length;if(h!=i(e).length&&!c)return!1;for(var l=h;l--;){var f=u[l];if(!(c?f in e:o.call(e,f)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var d=!0;a.set(t,e),a.set(e,t);for(var v=c;++l<h;){var b=t[f=u[l]],y=e[f];if(r)var g=c?r(y,b,f,e,t,a):r(b,y,f,t,e,a);if(!(void 0===g?b===y||s(b,y,n,r,a):g)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var m=t.constructor,_=e.constructor;m!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d}},function(t,e,n){var i=n(116),o=n(118),r=n(121);t.exports=function(t){return i(t,r,o)}},function(t,e,n){var i=n(117),o=n(5);t.exports=function(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}},function(t,e,n){var i=n(119),o=n(120),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),i(s(t),(function(e){return r.call(t,e)})))}:o;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(35),o=n(122),r=n(11);t.exports=function(t){return r(t)?i(t):o(t)}},function(t,e,n){var i=n(18),o=n(123),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var i=n(30)(Object.keys,Object);t.exports=i},function(t,e,n){var i=n(125),o=n(13),r=n(126),s=n(127),a=n(128),c=n(4),u=n(24),h=u(i),l=u(o),f=u(r),p=u(s),d=u(a),v=c;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||r&&"[object Promise]"!=v(r.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case h:return"[object DataView]";case l:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var i=n(2)(n(0),"DataView");t.exports=i},function(t,e,n){var i=n(2)(n(0),"Promise");t.exports=i},function(t,e,n){var i=n(2)(n(0),"Set");t.exports=i},function(t,e,n){var i=n(2)(n(0),"WeakMap");t.exports=i},function(t,e,n){var i=n(1),o=n(130),r=n(131),s=Math.max,a=Math.min;t.exports=function(t,e,n){var c,u,h,l,f,p,d=0,v=!1,b=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=c,i=u;return c=u=void 0,d=e,l=t.apply(i,n)}function m(t){return d=t,f=setTimeout(w,e),v?g(t):l}function _(t){var n=t-p;return void 0===p||n>=e||n<0||b&&t-d>=h}function w(){var t=o();if(_(t))return C(t);f=setTimeout(w,function(t){var n=e-(t-p);return b?a(n,h-(t-d)):n}(t))}function C(t){return f=void 0,y&&c?g(t):(c=u=void 0,l)}function E(){var t=o(),n=_(t);if(c=arguments,u=this,p=t,n){if(void 0===f)return m(p);if(b)return clearTimeout(f),f=setTimeout(w,e),g(p)}return void 0===f&&(f=setTimeout(w,e)),l}return e=r(e)||0,i(n)&&(v=!!n.leading,h=(b="maxWait"in n)?s(r(n.maxWait)||0,e):h,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==f&&clearTimeout(f),d=0,c=p=u=f=void 0},E.flush=function(){return void 0===f?l:C(o())},E}},function(t,e,n){var i=n(0);t.exports=function(){return i.Date.now()}},function(t,e,n){var i=n(1),o=n(132),r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=a.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):s.test(t)?NaN:+t}},function(t,e,n){var i=n(4),o=n(3);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==i(t)}},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function r(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function c(t){setTimeout((function(){throw t}),0)}var u={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},h=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function l(t){return null!==t&&"object"==typeof t}var f=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),p=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(r(i))try{i.call(this)}catch(t){e=t instanceof f?d(t.errors):[t]}if(h(o)){s=-1;for(var a=o.length;++s<a;){var c=o[s];if(l(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof f?e=e.concat(d(t.errors)):e.push(t)}}}if(e)throw new f(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof t){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function d(t){return t.reduce((function(t,e){return t.concat(e instanceof f?e.errors:e)}),[])}var v=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),b=function(t){function e(n,i,o){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=u;break;case 1:if(!n){r.destination=u;break}if("object"==typeof n){n instanceof e?(r.syncErrorThrowable=n.syncErrorThrowable,r.destination=n,n.add(r)):(r.syncErrorThrowable=!0,r.destination=new y(r,n));break}default:r.syncErrorThrowable=!0,r.destination=new y(r,n,i,o)}return r}return o(e,t),e.prototype[v]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(p),y=function(t){function e(e,n,i,o){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return r(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==u&&(r((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=i,a._complete=o,a}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(b);var g=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function m(){}function _(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:m}var w=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,o=function(t,e,n){if(t){if(t instanceof b)return t;if(t[v])return t[v]()}return t||e||n?new b(t,e,n):new b(u)}(t,e,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof b?i:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=C(e))((function(e,i){var o;o=n.subscribe((function(e){try{t(e)}catch(t){i(t),o&&o.unsubscribe()}}),i,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[g]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:_(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=C(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function C(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var E=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),S=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(p),k=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(b),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[v]=function(){return new k(this)},e.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new E;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new E;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new E;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new E;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new E;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new S(this,t))},e.prototype.asObservable=function(){var t=new w;return t.source=this,t},e.create=function(t,e){return new I(t,e)},e}(w),I=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):p.EMPTY},e}(O);function x(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A(t,e))}}var A=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new T(t,this.project,this.thisArg))},t}(),T=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(b);function D(t,e,n,i){return r(n)&&(i=n,n=void 0),i?D(t,e,n).pipe(x((function(t){return h(t)?i.apply(void 0,t):i(t)}))):new w((function(i){!function t(e,n,i,o,r){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,i,r),s=function(){return a.removeEventListener(n,i,r)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var c=e;e.on(n,i),s=function(){return c.off(n,i)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(n,i),s=function(){return u.removeListener(n,i)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var h=0,l=e.length;h<l;h++)t(e[h],n,i,o,r)}o.add(s)}(t,e,(function(t){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(t)}),i,n)}))}function R(t){return t&&"function"==typeof t.schedule}var N=function(t){function e(e,n,i){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(b),P=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()}};function j(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var L=j(),G=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function M(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var B=function(t){if(t&&"function"==typeof t[g])return i=t,function(t){var e=i[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(G(t))return P(t);if(M(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,c),t};if(t&&"function"==typeof t[L])return e=t,function(t){for(var n=e[L]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,i,o=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function H(t,e,n,i,o){if(void 0===o&&(o=new N(t,n,i)),!o.closed)return e instanceof w?e.subscribe(o):B(e)(o)}var z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(b);function $(t,e){return new w((function(n){var i=new p,o=0;return i.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}function F(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new w((function(n){var i=new p;return i.add(e.schedule((function(){var o=t[g]();i.add(o.subscribe({next:function(t){i.add(e.schedule((function(){return n.next(t)})))},error:function(t){i.add(e.schedule((function(){return n.error(t)})))},complete:function(){i.add(e.schedule((function(){return n.complete()})))}}))}))),i}))}(t,e);if(M(t))return function(t,e){return new w((function(n){var i=new p;return i.add(e.schedule((function(){return t.then((function(t){i.add(e.schedule((function(){n.next(t),i.add(e.schedule((function(){return n.complete()})))})))}),(function(t){i.add(e.schedule((function(){return n.error(t)})))}))}))),i}))}(t,e);if(G(t))return $(t,e);if(function(t){return t&&"function"==typeof t[L]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new w((function(n){var i,o=new p;return o.add((function(){i&&"function"==typeof i.return&&i.return()})),o.add(e.schedule((function(){i=t[L](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var o=i.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function V(t,e){return e?F(t,e):t instanceof w?t:new w(B(t))}function Y(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(i){return i.pipe(Y((function(n,i){return V(t(n,i)).pipe(x((function(t,o){return e(n,t,i,o)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new U(t,n))})}var U=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new K(t,this.project,this.concurrent))},t}(),K=function(t){function e(e,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=new N(this,e,n),o=this.destination;o.add(i);var r=H(this,t,void 0,void 0,i);r!==i&&o.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(z);function W(t){return t}function X(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Y(W,t)}function q(t,e){return e?$(t,e):new w(P(t))}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return R(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof w?t[0]:X(n)(q(t,i))}var Z,Q,tt,et,nt,it,ot,rt,st,at,ct,ut,ht,lt,ft=n(39),pt=n.n(ft),dt=n(5),vt=n.n(dt);function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.ARC="arcGroup",t.GEOMETRY="geometryGroup",t.CONNECTOR="connector"}(Z||(Z={})),function(t){t.NONE="none",t.ACTIVE="active",t.CHILD="child",t.PARENT="parent",t.DOT="dot",t.HIDDEN="hidden",t.BACK="back",t.BACK_CHILD="backChild",t.SUBMENU="submenu",t.SELECTED="selected",t.ACTIVE_SELECTION="activeSelected"}(Q||(Q={})),function(t){t.SELECTION="itemSelection",t.SUBMENU="navigationSubmenu",t.BACK="navigationBack",t.BACK_HOVER="navigationBackHover",t.HOVER="itemHover",t.HOVER_SELECTION="itemSelectionHover",t.SLIDER_VALUE_CHANGING="sliderValueChanging",t.SLIDER_VALUE_FINAL="sliderValueFinal"}(tt||(tt={})),function(t){t.LEFT_CLICK="leftClick",t.RIGHT_CLICK="rightClick"}(et||(et={})),function(t){t.DRAGGING="dragging",t.END="dragEnd"}(nt||(nt={})),function(t){t.MAIN="main",t.GEOMETRY="geometry",t.CONNECTOR="connector",t.ARC="arc",t.SCALES="scales",t.RADII="radii",t.CHECKBOX="checkbox",t.RIBBONSLIDER="ribbonslider"}(it||(it={})),ot=it.MAIN,rt=it.GEOMETRY,st=it.CONNECTOR,at=it.ARC,ct=it.SCALES,ut=it.RADII,ht=it.CHECKBOX,lt=it.RIBBONSLIDER;var mt=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bt(this,t),gt(this,"_defaultSettings",(gt(e={},it.MAIN,{minDistance:150,minTraceDistance:175,animationDuration:250,enableMaxClickRadius:!0,enableAutoResize:!0,inputTimeout:200,canvasId:"tasty"}),gt(e,it.GEOMETRY,{size:50,sizeDeadZone:25,color:"#575859",selectionColor:"#577a85",stroke:{enabled:!0,color:"rgba(62, 62, 64, 1.0)",width:2},useActionShape:!0,text:{color:"#fff",selectionColor:"#fff"},icon:{color:"#fff",selectionColor:"#fff"}}),gt(e,it.CHECKBOX,{selectionColor:"#529b1e",selectionColorSelected:"#396e14",cornerRadius:25}),gt(e,it.RIBBONSLIDER,{gradientColor:"rgba(62, 62, 64, 1.0)",gradientColorSides:"rgba(32, 32, 32, 0)",maskStart:.1,maskLengthMultiplier:.6,gradientLength:150,ribbonHeight:60}),gt(e,it.CONNECTOR,{enabled:!0,color:"#393a3c",width:10}),gt(e,it.ARC,{enabled:!0,color:[["#575859",.15],["rgba(87, 122, 133, 0.5)",.5],["rgba(74, 159, 158, 0.15)",.8],"rgba(87, 88, 89, 0)"],radial:!0,stroke:{enabled:!0,width:1}}),gt(e,it.SCALES,{parent:.5,child:.5,dot:.15,icon:{base:.0625,solo:1.6,child:.7}}),gt(e,it.RADII,{child:100,dot:25,arc:300,maxClickRadius:450}),e)),gt(this,"_settings",void 0);var i=function(t,e){if(vt()(t))return e};this._settings=pt()(this._defaultSettings,n,i)}var e,n,i;return e=t,(n=[{key:"defaultSettings",get:function(){return this._defaultSettings}},{key:ot,get:function(){return this._settings[it.MAIN]}},{key:rt,get:function(){return this._settings[it.GEOMETRY]}},{key:st,get:function(){return this._settings[it.CONNECTOR]}},{key:at,get:function(){return this._settings[it.ARC]}},{key:ct,get:function(){return this._settings[it.SCALES]}},{key:ut,get:function(){return this._settings[it.RADII]}},{key:ht,get:function(){return this._settings[it.CHECKBOX]}},{key:lt,get:function(){return this._settings[it.RIBBONSLIDER]}},{key:"projectStyle",get:function(){return{fillColor:this.geometry.color,strokeColor:this.geometry.stroke.color,strokeWidth:this.geometry.stroke.enabled?this.geometry.stroke.width:0}}}])&&yt(e.prototype,n),i&&yt(e,i),t}();var _t=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new wt(t,this.predicate,this.thisArg))},t}(),wt=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(b);var Ct=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Et(t,this.project))},t}(),Et=function(t){function e(e,n){var i=t.call(this,e)||this;return i.project=n,i.index=0,i}return o(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe();var o=new N(this,e,n),r=this.destination;r.add(o),this.innerSubscription=H(this,t,void 0,void 0,o),this.innerSubscription!==o&&r.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(e)},e}(z);var St=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new kt(t),i=H(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n},t}(),kt=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return o(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(z);var Ot=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new It(t,this.callback))},t}(),It=function(t){function e(e,n){var i=t.call(this,e)||this;return i.add(new p(n)),i}return o(e,t),e}(b),xt=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return o(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,i=void 0;try{this.work(t)}catch(t){n=!0,i=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(p)),At=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Tt=new(function(t){function e(n,i){void 0===i&&(i=At.now);var o=t.call(this,n,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():i()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return o(e,t),e.prototype.schedule=function(n,i,o){return void 0===i&&(i=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,i,o):t.prototype.schedule.call(this,n,i,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(At))(xt);function Dt(t,e,n){return void 0===n&&(n=Tt),function(i){var o,r=(o=t)instanceof Date&&!isNaN(+o),s=r?+t-n.now():Math.abs(t);return i.lift(new Rt(s,r,e,n))}}var Rt=function(){function t(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(t,e){return e.subscribe(new Nt(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Nt=function(t){function e(e,n,i,o,r){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=i,s.withObservable=o,s.scheduler=r,s.action=null,s.scheduleTimeout(),s}return o(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(H(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(z),Pt=n(12),jt=new Pt.Point(0,0),Lt=new Pt.Point(0,-1),Gt=new Pt.Point(1,1);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Ht(t):e}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t,e,n){return(zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yt(t,e,n){return e&&Vt(t.prototype,e),n&&Vt(t,n),t}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.freeze(jt),Object.freeze(Lt),Object.freeze(Gt);var Wt=function(){function t(e){Kt(this,t),Ut(this,"_options",{}),Ut(this,"_target",void 0),Ut(this,"_from",void 0),Ut(this,"_to",void 0),Ut(this,"onFinishCallbacks",new Array),Ut(this,"onStopCallbacks",new Array),Ut(this,"_tween",void 0),Ut(this,"_initialized",!1),void 0!==e&&this.initialize(e)}return Yt(t,[{key:"initialize",value:function(e){var n=this;this._target=e.target,this._from=t.normalize(e.from||{}),this._to=t.normalize(e.to||{}),this._options=t.parseOptions(e.options||{}),this._tween=this.createTween(e),this._tween.then((function(){n.runOnFinish()})),this._initialized=!0}},{key:"start",value:function(){if(!this._initialized)throw new Error("Animation not initialized");void 0!==this._tween&&this._tween.start()}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];void 0!==this._tween&&this._tween.running&&(this._tween.stop(),t&&void 0!==this._to&&(void 0!==this._to["lastSegment.point"]&&(this._to.lastSegment={point:this._to["lastSegment.point"]},delete this._to["lastSegment.point"]),this._target.set(this._to))),this.runOnStop()}},{key:"onFinish$",value:function(t){this.onFinishCallbacks.push(t)}},{key:"onStop$",value:function(t){this.onStopCallbacks.push(t)}},{key:"createTween",value:function(t){if(void 0===t.from&&void 0===t.to)throw new Error('Animation is missing "from" and "to" data.');return void 0===t.from?this._target.tweenTo(this._to,{duration:this._options.duration,easing:this._options.easing,start:!1}):void 0===t.to?this._target.tweenFrom(this._from,{duration:this._options.duration,easing:this._options.easing,start:!1}):this._target.tween(this._from,this._to,{duration:this._options.duration,easing:this._options.easing,start:!1})}},{key:"runOnFinish",value:function(){this.onFinishCallbacks.forEach((function(t){return t()})),this.onFinishCallbacks.length=0}},{key:"runOnStop",value:function(){this.onStopCallbacks.forEach((function(t){return t()})),this.onStopCallbacks.length=0}},{key:"duration",set:function(t){void 0!==this._options&&(this._options.duration=t),void 0!==this._tween&&(this._tween.duration=t)},get:function(){return this._options&&this._options.duration}},{key:"easing",set:function(t){void 0!==this._options&&(this._options.easing=t),void 0!==this._tween&&(this._tween.easing=t)}},{key:"running",get:function(){return void 0!==this._tween&&this._tween.running}},{key:"target",get:function(){return this._target}}],[{key:"normalize",value:function(t){return"number"==typeof t.scaling&&(0===t.scaling?t.scaling=Number.EPSILON:t.scaling=Gt.multiply(t.scaling)),t}},{key:"parseOptions",value:function(t){return void 0===t&&(t={}),void 0===t.duration?t.duration=Number.EPSILON:0===t.duration&&(t.duration=Number.EPSILON),void 0===t.easing&&(t.easing="easeOutCubic"),t}}]),t}(),Xt=function(t){function e(){var t;Kt(this,e),Ut(Ht(t=Bt(this,$t(e).call(this))),"_animations",void 0),Ut(Ht(t),"finCount",0),Ut(Ht(t),"stopCount",0);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.length>0?t._animations=i:t._animations=new Array,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(e,t),Yt(e,[{key:"push",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach((function(e){void 0!==t._options.duration&&e.duration===Number.EPSILON&&(e.duration=t._options.duration),void 0!==t._options.easing&&(e.easing="function"==typeof t._options.easing?t._options.easing:paper.Tween.easings[t._options.easing]),e.onFinish$((function(){t.onFinishIntern()})),e.onStop$((function(){t.onStopIntern()})),t._animations.push(e)}))}},{key:"reset",value:function(){this.resetChildren(),this.finCount=0,this.stopCount=0,this.onFinishCallbacks.length=0,this.onStopCallbacks.length=0}},{key:"resetChildren",value:function(){this._animations.length=0}},{key:"start",value:function(){this._animations.forEach((function(t){t.start()}))}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._animations.forEach((function(e){e.stop(t)}))}},{key:"remove",value:function(t){this._animations=this._animations.filter((function(e){return e.target!==t}))}},{key:"runOnStop",value:function(){zt($t(e.prototype),"runOnStop",this).call(this),this.stopCount=0}},{key:"runOnFinish",value:function(){zt($t(e.prototype),"runOnFinish",this).call(this),this.finCount=0}},{key:"onFinishIntern",value:function(){this.finCount++,this.finCount===this.length&&this.runOnFinish()}},{key:"onStopIntern",value:function(){this.stopCount++,this.stopCount===this.length&&this.runOnStop()}},{key:"length",get:function(){return this._animations.length}},{key:"running",get:function(){return void 0!==this._animations.find((function(t){return t.running}))}},{key:"duration",set:function(t){this._options.duration=t,this._animations.forEach((function(e){e.duration=t}))}},{key:"easing",set:function(t){this._options.easing=t,this._animations.forEach((function(e){e.easing=t}))}}]),e}(Wt);function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Zt(this,"MINIMUM_DISTANCE",100),Zt(this,"SAMPLING_DISTANCE",20),Zt(this,"THRESHOLD_ANGLE",Math.PI/t.THRESHOLD),Zt(this,"PAUSE_DELAY",100),Zt(this,"_onDirectionChanged$",void 0),Zt(this,"_onStutter$",void 0),Zt(this,"_stroke",void 0),Zt(this,"_timoutId",void 0),this._stroke=Array(),this._onDirectionChanged$=new O,this._onStutter$=new O,this.MINIMUM_DISTANCE=e[it.MAIN].minTraceDistance}var e,n,i;return e=t,i=[{key:"angle",value:function(t,e){return Math.acos(t.dot(e)/(t.length*e.length))}}],(n=[{key:"reset",value:function(){this._stroke=Array()}},{key:"update",value:function(e){var n=this;if(0!=this._stroke.length){var i=this._stroke[this._stroke.length-1],o=e.getDistance(i);if(o>this.SAMPLING_DISTANCE){var r=o/this.SAMPLING_DISTANCE,s=this._stroke[this._stroke.length-1];"object"===qt(this._timoutId)&&(clearTimeout(this._timoutId),delete this._timoutId);for(var a=1;a<=o/this.SAMPLING_DISTANCE;++a){var c=a/r;this._stroke.push(new paper.Point(c*e.x+(1-c)*s.x,c*e.y+(1-c)*s.y))}var u=this._stroke.length;this._timoutId=setTimeout((function(){u===n._stroke.length&&e.getDistance(n._stroke[0])>n.MINIMUM_DISTANCE&&(n._onStutter$.next(e),n.reset())}),this.PAUSE_DELAY)}this._stroke.length>=2&&t.angle(this.getStrokeDirection(),e.subtract(this._stroke[0]))>this.THRESHOLD_ANGLE&&e.getDistance(this._stroke[0])>this.MINIMUM_DISTANCE&&(this._onDirectionChanged$.next(i),this.reset())}else this._stroke.push(e)}},{key:"getStrokeDirection",value:function(){var t=this;return this._stroke.reduce((function(e,n,i){return i>0&&(e.x+=n.x/(t._stroke.length-1),e.y+=n.y/(t._stroke.length-1)),e}),jt.clone()).subtract(this._stroke[0])}},{key:"onDecisionPoint$",get:function(){return J(this.onStutter$,this.onDirectionChanged$)}},{key:"onStutter$",get:function(){return this._onStutter$.asObservable()}},{key:"onDirectionChanged$",get:function(){return this._onDirectionChanged$.asObservable()}}])&&Jt(e.prototype,n),i&&Jt(e,i),t}();function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Zt(Qt,"THRESHOLD",30);var ne,ie,oe,re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"fromSettings",value:function(e){if("string"==typeof e)return t.fromString(e);if(Array.isArray(e))return t.fromArray(e);throw new Error("Invalid color. Accepted formats are string | array")}},{key:"fromString",value:function(e){return t.isTransparent(e)?t.TRANSPARENT:new paper.Color(e)}},{key:"fromArray",value:function(e){var n=new Array;if(e.forEach((function(e){if(Array.isArray(e)){var i,o,r=te(e[0]),s=te(e[1]);if(2!==e.length)throw new Error("Invalid number of gradient settings. Expected 2 got ".concat(e.length,"."));if(r===s)throw new Error("Invalid gradient settings. [".concat(r,", ").concat(s,"] does not match expected format [string, number]."));"string"===r?(i=e[0],o=e[1]):(i=e[1],o=e[0]),t.isTransparent(i)&&(i="rgba(255, 255, 255, 0)"),n.push(new paper.GradientStop(t.fromString(i),o))}else{if(t.isTransparent(e))return void n.push(new paper.GradientStop(t.TRANSPARENT));n.push(new paper.GradientStop(t.fromString(e)))}})),1===e.length)return n[0].color;var i=new paper.Gradient;return i.stops=n,i}},{key:"isTransparent",value:function(t){return"transparent"===t.toLowerCase()}}],(n=null)&&ee(e.prototype,n),i&&ee(e,i),t}();function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ne=re,ie="TRANSPARENT",oe=new paper.Color(255,255,255,0),ie in ne?Object.defineProperty(ne,ie,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ne[ie]=oe;var ue=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};se(this,t),ce(this,"inputActivation$",void 0),ce(this,"inputDeactivation$",void 0),ce(this,"inputPosition$",void 0),ce(this,"_inputPosition",jt),ce(this,"_click$",void 0),ce(this,"_dragging$",void 0),ce(this,"_rootSelector",void 0),ce(this,"_root",void 0),ce(this,"_canvas",void 0),ce(this,"_scope",void 0),ce(this,"_rootItem",void 0),ce(this,"_settings",void 0),ce(this,"_fadeAnimation",void 0),ce(this,"_trace",void 0),ce(this,"_traceVisGroup",void 0),ce(this,"_markingMode",!1),this._rootSelector=e,this._settings=new mt(n),this._fadeAnimation=new Wt,this._trace=new Qt(this._settings),this.inputActivation$=new O,this.inputDeactivation$=new O,this.inputPosition$=new O,this._dragging$=new O,this._click$=new O}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this,e=document.querySelector(this._rootSelector);if(null===e)throw new Error("No element matching '".concat(this._rootSelector,"' found."));this._root=e,this.setupCanvas(),this.setupScope(),this.setupObservables(),this.resize(),this._settings[it.MAIN].enableAutoResize&&window.addEventListener("resize",(function(){t.resize()})),void 0===window.PointerEvent?this.setupObservableDataFromInputEvents():this.setupObservableDataFromPointerEvents(),this._traceVisGroup=new paper.Group}},{key:"display",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(void 0===this._rootItem)throw new Error("Menu not initialized.");this._rootItem.state!==Q.HIDDEN&&this._rootItem.state!==Q.NONE||(this.trace$.reset(),this._traceVisGroup.removeChildren(),this._fadeAnimation.stop(),this._rootItem.visible=!0,this._fadeAnimation.start(),this._rootItem.state=Q.ACTIVE,this._rootItem.redraw(),this._rootItem.position=null===t?this.inputPosition:t)}},{key:"hide",value:function(){if(void 0===this._rootItem)throw new Error("Menu not initialized.");this._rootItem.state!==Q.HIDDEN&&(this._rootItem.visible=!1,this._rootItem.state=Q.HIDDEN,this._rootItem.redraw())}},{key:"setStructure",value:function(t){this._rootItem=t,this._rootItem.menu=this,this._rootItem.settings=this._settings,this._rootItem.init(),this._rootItem.visible=!1,this._fadeAnimation.initialize({target:this._rootItem,from:{opacity:0},to:{opacity:1},options:{duration:this._settings[it.MAIN].animationDuration,easing:"easeOutCubic"}})}},{key:"resize",value:function(){void 0!==this._root&&void 0!==this._scope&&(this._scope.project.view.viewSize=new paper.Size(this._root.offsetWidth,this._root.offsetHeight))}},{key:"toJSON",value:function(){return void 0===this._rootItem&&console.error("Menu not initialized."),this._rootItem.toJSON()}},{key:"setupCanvas",value:function(){if(void 0===this._root)throw new Error("Root element '".concat(this._rootSelector,"' missing."));this._canvas=document.createElement("canvas"),this._canvas.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._canvas.setAttribute("data-paper-resize","true"),this._canvas.setAttribute("tabindex","1"),this._canvas.style["touch-action"]="none",this._canvas.style.outline="none",this._canvas.id=this._settings[it.MAIN].canvasId,this._root.appendChild(this._canvas)}},{key:"setupScope",value:function(){this._scope=new paper.PaperScope,this._scope.settings.insertItems=!1,this._scope.settings.applyMatrix=!1,this._scope.activate(),this._scope.setup(this.canvas),this._scope.project.currentStyle=this._settings.projectStyle}},{key:"setupObservables",value:function(){var t,e,n=this;D(this._scope.view,"mousemove").pipe(x((function(t){return t.point}))).subscribe(this.inputPosition$),this.inputActivation$.pipe((t=function(t){return 1===t.buttons},function(n){return n.lift(new _t(t,e))}),function t(e,n){return"function"==typeof n?function(i){return i.pipe(t((function(t,i){return V(e(t,i)).pipe(x((function(e,o){return n(t,e,i,o)})))})))}:function(t){return t.lift(new Ct(e))}}((function(){return n.inputPosition$.pipe(x((function(t){return{position:t,state:nt.DRAGGING}})),(e=n.inputDeactivation$,function(t){return t.lift(new St(e))}),(t=function(){n._markingMode&&(n._markingMode=!1,n._dragging$.next({position:n.inputPosition,state:nt.END}))},function(e){return e.lift(new Ot(t))}));var t,e}))).subscribe(this._dragging$),this.inputActivation$.pipe(Y((function(){return n.inputDeactivation$.pipe(Dt(n._settings[it.MAIN].inputTimeout,new w),x((function(t){return 0===t.button?et.LEFT_CLICK:et.RIGHT_CLICK})))}))).subscribe(this._click$),this._dragging$.subscribe((function(t){n.display(),n._markingMode=t.state!==nt.END,n._trace.update(t.position)})),this.inputPosition$.subscribe((function(t){n._inputPosition=t})),this._click$.subscribe((function(t){t===et.LEFT_CLICK&&n.display()}))}},{key:"setupObservableDataFromPointerEvents",value:function(){var t=J(this.createObserver("pointerup"),this.createObserver("pointercancel")),e=this.createObserver("pointerdown"),n=J(this.createObserver("pointerleave"),this.createObserver("pointerout"));e.subscribe(this.inputActivation$),t.subscribe(this.inputDeactivation$),n.subscribe(this.inputDeactivation$)}},{key:"setupObservableDataFromInputEvents",value:function(){var t=this.createObserver("touchend"),e=this.createObserver("touchdown"),n=this.createObserver("touchcancel"),i=this.createObserver("mouseup"),o=this.createObserver("mousedown"),r=this.createObserver("mouseleave"),s=J(t,i),a=J(e,o),c=J(n,r);a.subscribe(this.inputActivation$),s.subscribe(this.inputDeactivation$),c.subscribe(this.inputDeactivation$)}},{key:"createObserver",value:function(t){return D(this._canvas,t)}},{key:"drawTrace",value:function(){var t=this;if(void 0===this._traceVisGroup)throw new Error("Trace visualization group not initialized");if(void 0===this._scope)throw new Error("Scope not set");this._scope.project.activeLayer.addChild(this._traceVisGroup),this._trace.onDecisionPoint$.subscribe((function(e){var n=new paper.Path.Circle(e,5);n.fillColor=re.fromString("green"),t._traceVisGroup.addChild(n)})),this._dragging$.subscribe((function(e){var n=new paper.Path.Circle(e.position,2);n.fillColor=re.fromString("black"),t._traceVisGroup.addChild(n)}))}},{key:"inputPosition",get:function(){return this._inputPosition}},{key:"click$",get:function(){if(void 0===this._click$)throw new Error("Menu not initialized");return this._click$.asObservable()}},{key:"dragging$",get:function(){if(void 0===this._dragging$)throw new Error("Menu not initialized");return this._dragging$.asObservable()}},{key:"selection$",get:function(){if(void 0===this._rootItem)throw new Error("Menu not initialized");return this._rootItem.selection$}},{key:"trace$",get:function(){return this._trace}},{key:"markingMode",get:function(){return this._markingMode}},{key:"canvas",get:function(){if(void 0===this._canvas)throw new Error("Canvas not initialized in menu");return this._canvas}}])&&ae(e.prototype,n),i&&ae(e,i),t}();var he=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new le(t,this.compare,this.keySelector))},t}(),le=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.keySelector=i,o.hasKey=!1,"function"==typeof n&&(o.compare=n),o}return o(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var i=!1;if(this.hasKey)try{i=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;i||(this.key=e,this.destination.next(t))},e}(b);function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"toDeg",value:function(e){return e*(t.HALF_CIRCLE_DEG/Math.PI)}},{key:"toRad",value:function(e){return e*(Math.PI/t.HALF_CIRCLE_DEG)}},{key:"difference",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Math.abs(t-e),o=2*Math.PI-Math.abs(t-e);return n?Math.max(i,o):Math.min(i,o)}},{key:"bisecting",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(e+Math.abs((n<e?t.HALF_CIRCLE_RAD:0)-Math.abs(e-n)/2))%t.FULL_CIRCLE_RAD;return i?t.toDeg(o):o}},{key:"opposite",value:function(t){return(Math.PI+t)%(2*Math.PI)}},{key:"toX",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Math.sin(e);return Math.abs(i)<Number.EPSILON?0:t.normalizeNumber(i*n)}},{key:"toY",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=-Math.cos(e);return Math.abs(i)<Number.EPSILON?0:t.normalizeNumber(i*n)}},{key:"between",value:function(t,e,n){return n>e?t<n&&t>e:t>e||t<n}},{key:"normalizeNumber",value:function(t){return t<0?Math.ceil(t):Math.floor(t)}}],(n=null)&&fe(e.prototype,n),i&&fe(e,i),t}();function ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}pe(de,"FULL_CIRCLE_DEG",360),pe(de,"HALF_CIRCLE_DEG",de.FULL_CIRCLE_DEG/2),pe(de,"FULL_CIRCLE_RAD",2*Math.PI),pe(de,"HALF_CIRCLE_RAD",de.FULL_CIRCLE_RAD/2);var be=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"fromAngles",value:function(t){var e=new Array,n=new Array;return(t=t.sort((function(t,e){return t-e}))).forEach((function(e,i){var o;o=0===i?t[t.length-1]:t[i-1];var r=de.bisecting(o,e);n.push(r)})),n.forEach((function(i,o){var r;r=o===t.length-1?n[0]:n[o+1];var s=de.bisecting(i,r);e.push({from:i,through:s,to:r,origAngle:t[o]})})),e}},{key:"fromDefinition",value:function(t,e){var n=function(t){return new paper.Point(de.toX(t,e.radii.arc),de.toY(t,e.radii.arc))},i=n(t.from),o=n(t.through),r=n(t.to),s=new paper.Path.Arc(i,o,r);s.add(jt),s.data=t,s.strokeWidth=0,s.closed=!0;var a=re.fromSettings(e.arc.color);return a instanceof paper.Color?s.fillColor=a:(a.radial=e.arc.radial,s.fillColor=new paper.Color(a,jt,o)),s.opacity=0,s.data.fx=new Wt,s}},{key:"arcStroke",value:function(t,e,n){var i=new paper.Path.Line(jt,t);return i.strokeWidth=n.arc.stroke.width,i.scale(.5),i.strokeColor=void 0===n.arc.stroke.color?e:re.fromString(n.arc.stroke.color),i}}],(n=null)&&ve(e.prototype,n),i&&ve(e,i),t}(),ye=n(40),ge=n.n(ye);function me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var we=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,"type",void 0),_e(this,"source",void 0),_e(this,"target",void 0),_e(this,"data",void 0),this.type=e,this.source={itemId:n.itemId,angle:de.toDeg(n.angle)},this.data=o,void 0!==i&&(this.target={itemId:i.itemId,angle:de.toDeg(i.angle)})}var e,n,i;return e=t,(n=[{key:"equals",value:function(t){if(void 0===t)return!1;var e,n=t.type===this.type,i=t.source.itemId===this.source.itemId;e=void 0===t.target||void 0===this.target||t.target.itemId===this.target.itemId&&t.target.angle===this.target.angle;var o=ge()(t.data,this.data);return n&&e&&i&&o}}])&&me(e.prototype,n),i&&me(e,i),t}();function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e){return!e||"object"!==Ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function De(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?Ne(t):e}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t,e){return(Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Le=function(t){function e(t,n,i,o){var r,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ae(this,e),je(Ne(r=De(this,Re(e).call(this))),"itemId",void 0),je(Ne(r),"textContent",void 0),je(Ne(r),"angle",void 0),je(Ne(r),"_iconName",void 0),je(Ne(r),"isRoot",void 0),je(Ne(r),"_state",Q.NONE),je(Ne(r),"needsReDraw",!0),je(Ne(r),"ready",!1),je(Ne(r),"geometryGroup",void 0),je(Ne(r),"arcGroup",void 0),je(Ne(r),"lineGroup",void 0),je(Ne(r),"arcs",void 0),je(Ne(r),"_text",void 0),je(Ne(r),"_geometry",void 0),je(Ne(r),"_selectionRadius",void 0),je(Ne(r),"_connector",void 0),je(Ne(r),"_icon",void 0),je(Ne(r),"isInBackNavigationArc",!1),je(Ne(r),"activeChild",void 0),je(Ne(r),"hoveredChild",void 0),je(Ne(r),"parentArc",void 0),je(Ne(r),"subscription",void 0),je(Ne(r),"_selectionSubject$",void 0),je(Ne(r),"_selectionObservable$",void 0),je(Ne(r),"_inputAngle$",void 0),je(Ne(r),"_animations",void 0),je(Ne(r),"_menu",void 0),je(Ne(r),"_settings",void 0),je(Ne(r),"_positionChild",void 0),je(Ne(r),"_positionDot",void 0),je(Ne(r),"_prevEvent",void 0),r.textContent=i,r.itemId=t,r.angle=de.toRad(n%de.FULL_CIRCLE_DEG),r.iconName=o,r.isRoot=s,r.geometryGroup=new paper.Group,r.arcGroup=new paper.Group,r.lineGroup=new paper.Group,r.pivot=jt,r.arcs=new Array,r._animations=new Xt,r._selectionSubject$=new O,r._selectionObservable$=r._selectionSubject$.asObservable(),r}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(e,t),n=e,(i=[{key:"init",value:function(){var t,e;this.ready||(this.isRoot?this.project.activeLayer.addChild(this):this.parent.addChild(this),this._inputAngle$=this.menu.inputPosition$.pipe(x(this.angleToReferencePoint.bind(this)),(t=function(t,e){return Math.round(de.toDeg(t))===Math.round(de.toDeg(e))},function(n){return n.lift(new he(t,e))})),this._positionChild=new paper.Point(de.toX(this.angle,this.settings[it.RADII].child),de.toY(this.angle,this.settings[it.RADII].child)).floor(),Object.freeze(this._positionChild),this._positionDot=new paper.Point(de.toX(this.angle,this.settings[it.RADII].dot),de.toY(this.angle,this.settings[it.RADII].dot)).floor(),Object.freeze(this._positionDot),this._animations.duration=this.settings[it.MAIN].animationDuration,this.preSetup(),this.setupGroups(),this.setupConnector(),this.setupGeometry(),this.setupIcon(),this.setupText(),this.setupSelectionRadius(),this.afterSetup(),this.addChild(this.connector),this.addChild(this.geometryGroup),this.geometryGroup.addChild(this.arcGroup),this.geometryGroup.addChild(this.geometry),this.geometryGroup.addChild(this.selectionRadius),this.geometryGroup.addChild(this.icon),this.geometryGroup.addChild(this.text),this.geometryGroup.addChild(this.lineGroup),this.getChildren().forEach((function(t){t.init()})),this.collectArcAngles(),this.createArcs(),this.itemReady())}},{key:"redraw",value:function(){void 0!==this._animations&&this.stopAnimations(),this.needsReDraw&&(this.drawItem(),this.needsReDraw=!1),this.getChildren().forEach((function(t){t.redraw()}))}},{key:"stateChanged",value:function(){if(this.isInBackNavigationArc=!1,this.geometryGroup.position=jt,this.geometryGroup.visible=!0,this.setColorDefault(),this.icon.visible=!0,this.icon.opacity=1,this.arcGroup.visible=!1,this.arcGroup.opacity=0,this.text.visible=!1,this.lineGroup.visible=!1,this.connector.visible=!1,this.selectionRadius.visible=!1,this.state===Q.ACTIVE||this.state===Q.ACTIVE_SELECTION?(this.addSubscriptions(),this.icon.opacity=e.ICON_BG_OPACITY,this.updateText(this.textContent)):(this.subscription&&this.subscription.unsubscribe(),this.arcGroup.children.forEach((function(t){t.opacity=0}))),this.setGroupsVisibility(),this.state===Q.HIDDEN){var t=this.parent,n=t.activeChild,i=!1,o=null!==t.parent&&t.parent.state===Q.BACK,r=t.state===Q.HIDDEN||t.state===Q.DOT;void 0!==n&&(i=n.state===Q.PARENT||n.state===Q.SUBMENU),(r||i||o)&&(this.geometryGroup.visible=!1),this.reset()}this.state!==Q.SUBMENU&&(this.connector.opacity=1,this.geometry.opacity=1,this.getChildren().forEach((function(t){t.geometry.opacity=1})))}},{key:"setGroupsVisibility",value:function(){switch(this.state){case Q.ACTIVE:this.text.visible=!0,this.arcGroup.visible=!0,this.lineGroup.visible=!0,this.selectionRadius.visible=this.settings[it.MAIN].enableMaxClickRadius;break;case Q.ACTIVE_SELECTION:this.text.visible=!0,this.arcGroup.visible=!0;break;case Q.CHILD:this.text.visible=""===this.iconName;break;case Q.DOT:this.icon.visible=!1;break;case Q.PARENT:this.connector.visible=!0;break;case Q.HIDDEN:case Q.BACK_CHILD:this.icon.visible=!1;break;case Q.SUBMENU:this.connector.firstSegment.point=jt,this.connector.lastSegment.point=jt,this.connector.visible=!0;break;case Q.SELECTED:this.text.visible=!0}}},{key:"addSubscriptions",value:function(){this.subscription=new p,this.subscription.add(this.inputAngle$.subscribe(this.selectionLogic.bind(this))),this.subscription.add(this.menu.click$.subscribe(this.clickLogic.bind(this))),this.subscription.add(this.menu.trace$.onDecisionPoint$.subscribe(this.traceLogic.bind(this))),this.subscription.add(this.menu.dragging$.subscribe(this.dragLogic.bind(this)))}},{key:"setupGroups",value:function(){this.geometryGroup.name=Z.GEOMETRY,this.geometryGroup.pivot=jt,this.geometryGroup.applyMatrix=!1,this.arcGroup.name=Z.ARC}},{key:"setupConnector",value:function(){this._connector=new paper.Path.Line(jt,jt),this.connector.strokeColor=re.fromString(this.settings[it.CONNECTOR].color),this.connector.strokeWidth=this.settings[it.CONNECTOR].width,this.connector.strokeCap="round",this.connector.name=Z.CONNECTOR,this.connector.visible=!1}},{key:"setupGeometry",value:function(){this._geometry=new paper.Path.Circle(jt,this.settings[it.GEOMETRY].size),0===this.childCount&&this.settings[it.GEOMETRY].useActionShape&&(this.geometry.segments[2].handleIn=new paper.Point(0,-this.settings[it.GEOMETRY].size/4),this.geometry.segments[2].handleOut=new paper.Point(0,this.settings[it.GEOMETRY].size/4),this.geometry.segments[2].point=this.geometry.segments[2].point.add(new paper.Point(this.settings[it.GEOMETRY].size/3,0)),this.geometry.pivot=jt,this.geometry.rotate(this.positionChild.angle)),this.setGeometryColorDefault(),this.geometry.strokeScaling=!1}},{key:"setupIcon",value:function(){if(void 0===this.iconName||""===this.iconName)this._icon=new paper.CompoundPath("");else{if(void 0===window.FontAwesome)return this._icon=new paper.CompoundPath(""),void console.error("FontAwesome not loaded.");var t=window.FontAwesome.icon({prefix:"fas",iconName:this.iconName});void 0===t?(console.error("Icon '".concat(this.iconName,"' does not exist.")),this._icon=new paper.CompoundPath("")):(this._icon=new paper.CompoundPath(t.icon[4]),this.icon.scale(this.settings[it.SCALES].icon.base*this.settings[it.SCALES].icon.solo),this.setIconColorDefault(),this.icon.strokeWidth=0,this.icon.position=jt)}}},{key:"setupText",value:function(){this._text=new paper.PointText(jt.clone()),this.text.justification="center",this.text.fontSize="16px",this.text.fontWeight="bold",this.setTextColorDefault(),this.text.strokeWidth=0,this.updateText(this.textContent||""),this.text.position=jt}},{key:"setupSelectionRadius",value:function(){this._selectionRadius=new paper.Path.Circle(jt,this.settings[it.RADII].maxClickRadius),this.selectionRadius.fillColor=null,this.selectionRadius.strokeWidth=1,this.selectionRadius.strokeColor=re.fromString(this.settings[it.GEOMETRY].color),null!==this.selectionRadius.strokeColor&&(this.selectionRadius.strokeColor.alpha=.25),this.selectionRadius.visible=!1}},{key:"getChildren",value:function(){return this.children.filter((function(t){return t instanceof e}))}},{key:"getNearestChild",value:function(t){return this.getChildren().reduce((function(e,n){return Math.abs(de.difference(e.angle,t))>Math.abs(de.difference(n.angle,t))?n:e}))}},{key:"updateText",value:function(t){t!==this.text.content&&(this.text.scaling=Gt,this.text.content=t,this.text.bounds.size.width+10>this.geometry.bounds.size.width&&this.text.fitBounds(this.geometry.bounds.scale(e.TEXT_OVERFLOW_SCALE)),this.text.position=jt)}},{key:"angleToReferencePoint",value:function(t){var e=Lt.getDirectedAngle(this.globalToLocal(t));return e<0&&(e+=de.FULL_CIRCLE_DEG),de.toRad(e)}},{key:"navigateBack",value:function(){this.parent instanceof e&&(this.menu.trace$.reset(),this.resetActiveHovered(),this.event(tt.BACK,this.parent),this.parent.state=Q.ACTIVE,this.state=Q.BACK,this.connector.strokeWidth=this.settings[it.CONNECTOR].width,this.connector.strokeColor=re.fromString(this.settings[it.CONNECTOR].color),this.root.redraw())}},{key:"changeActive",value:function(){this.activeChild=this.getNearestChild(this.angleToReferencePoint(this.menu.inputPosition)),this.state=Q.SUBMENU,this.menu.trace$.reset(),this.activeChild.isLeaf?this.menu.markingMode?(this.activeChild.state=Q.ACTIVE_SELECTION,this.event(tt.HOVER_SELECTION,this.activeChild)):this.activeChild.state=Q.SELECTED:(this.activeChild.state=Q.ACTIVE,this.event(tt.SUBMENU,this.activeChild)),this.root.redraw()}},{key:"selectedEvent",value:function(){this.event(tt.SELECTION,this)}},{key:"event",value:function(t,e,n){var i=new we(t,this,e,n);void 0!==this._prevEvent&&i.equals(this._prevEvent)||this.root._selectionSubject$.next(i),this._prevEvent=i}},{key:"reset",value:function(){this.resetActiveHovered(),this._prevEvent=void 0,this.geometryGroup.position=jt,this.arcGroup.children.forEach((function(t){t.opacity=0})),this.connector.visible=!1,this.connector.firstSegment.point=jt,this.connector.lastSegment.point=jt,this.connector.strokeColor=re.fromString(this.settings[it.CONNECTOR].color),this.connector.strokeWidth=this.settings[it.CONNECTOR].width,this.getChildren().forEach((function(t){return t.reset()}))}},{key:"stopAnimations",value:function(){this._animations.stop(),this._animations.reset(),this._animations.easing="easeOutCubic"}},{key:"resetActiveHovered",value:function(){this.activeChild=void 0,this.hoveredChild=void 0}},{key:"collectArcAngles",value:function(){var t=new Array,e=de.opposite(this.angle);this.isRoot||t.push(e),this.getChildren().forEach((function(e){t.push(e.angle)})),1===t.length&&t.push(de.opposite(t[0])),this.arcs=be.fromAngles(t),this.isRoot||(this.parentArc=this.arcs.find((function(t){return t.origAngle===e})))}},{key:"createArcs",value:function(){var t=this;this.arcGroup.children.length=0,this.arcs.forEach((function(e){var n=be.fromDefinition(e,t.settings);t.arcGroup.addChild(n),t.settings[it.ARC].stroke.enabled&&t.lineGroup.addChild(be.arcStroke(n.firstSegment.point,n.fillColor,t.settings))}))}},{key:"resetChildColor",value:function(){this.getChildren().forEach((function(t){t.setColorDefault(),t.getChildren().forEach((function(t){t.setColorDefault()}))}))}},{key:"selectionLogic",value:function(t){var e=jt.getDistance(this.globalToLocal(this.menu.inputPosition));if(this.isRoot||(this.isInBackNavigationArc=de.between(t,this.parentArc.from,this.parentArc.to)),e<this.settings[it.GEOMETRY].sizeDeadZone)this.selectionLogicInGeometryOperations();else{if(this.isInBackNavigationArc)this.resetActiveHovered(),this.selectionLogicBackOperations();else{if(this.isLeaf)return;var n=this.getNearestChild(t);this.hoveredChild,this.selectionLogicHoverOperations(n)}this.animateArcs(t)}}},{key:"selectionLogicInGeometryOperations",value:function(){this.resetActiveHovered(),this.arcGroup.children.forEach((function(t){t.opacity=0})),this.updateText(this.textContent),this.resetChildColor()}},{key:"selectionLogicBackOperations",value:function(){this.resetChildColor(),this.event(tt.BACK_HOVER,this.parent),this.updateText("Back")}},{key:"selectionLogicHoverOperations",value:function(t){this.resetChildColor(),this.hoveredChild=t,this.hoveredChild.setColorHovered(),this.hoveredChild.getChildren().forEach((function(t){t.setColorHovered()})),this.hoveredChild.isLeaf?this.event(tt.HOVER_SELECTION,this.hoveredChild):this.event(tt.HOVER,this.hoveredChild),this.updateText(this.hoveredChild.textContent)}},{key:"clickLogic",value:function(t){var e=jt.getDistance(this.globalToLocal(this.menu.inputPosition));if(e>=this.settings[it.RADII].maxClickRadius&&this.settings[it.MAIN].enableMaxClickRadius)return this.root.state=Q.HIDDEN,void this.root.redraw();t!==et.RIGHT_CLICK?this.isInBackNavigationArc&&e>this.settings[it.GEOMETRY].sizeDeadZone?this.navigateBack():void 0!==this.hoveredChild&&this.changeActive():this.isRoot?(this.root.state=Q.HIDDEN,this.root.visible=!1):this.navigateBack()}},{key:"traceLogic",value:function(t){var e=this.angleToReferencePoint(t),n=this.globalToLocal(t);if(!this.isRoot&&this.isInBackNavigationArc&&jt.getDistance(n)>=this.settings[it.MAIN].minTraceDistance)return this.connector.visible=!1,void this.navigateBack();this.isLeaf||(this.hoveredChild=this.getNearestChild(e),this.hoveredChild.position=n,this.changeActive())}},{key:"dragLogic",value:function(t){this.connector.visible=!1;var e=this.globalToLocal(t.position);if(this.isLeaf)t.state===nt.END&&(this.menu.trace$.reset(),this.state=Q.SELECTED,this.root.redraw());else if(t.state===nt.END&&e.getDistance(jt)>this.settings[it.MAIN].minTraceDistance)this.changeActive();else{var n=this.getNearestChild(this.angleToReferencePoint(t.position));jt.getDistance(e)>=this.settings[it.MAIN].minTraceDistance&&!this.isInBackNavigationArc?(n.stopAnimations(),n.position=e,this.connector.visible=!0,this.connector.lastSegment.point=e):n.position=n.positionChild,this.getChildren().filter((function(t){return t!==n})).forEach((function(t){t.position=t.positionChild}))}}},{key:"drawItem",value:function(){switch(this.state){case Q.HIDDEN:this.animateStateHidden();break;case Q.ACTIVE:this.animateStateActive();break;case Q.ACTIVE_SELECTION:this.animateStateActiveSelection();break;case Q.CHILD:this.animateStateChild();break;case Q.PARENT:this.animateStateParent();break;case Q.DOT:this.animateStateDot();break;case Q.BACK:this.animateStateBack();break;case Q.BACK_CHILD:this.animateStateBackChild();break;case Q.SUBMENU:this.animateStateSubmenu();break;case Q.SELECTED:this.animateStateSelected()}this._animations.start()}},{key:"itemReady",value:function(){this.ready=!0}},{key:"preSetup",value:function(){}},{key:"afterSetup",value:function(){}},{key:"setGeometryColorDefault",value:function(){this.geometry.fillColor=re.fromString(this.settings[it.GEOMETRY].color)}},{key:"setGeometryColorSelected",value:function(){this.geometry.fillColor=re.fromString(this.settings[it.GEOMETRY].selectionColor)}},{key:"setGeometryColorActiveSelected",value:function(){this.setGeometryColorSelected()}},{key:"setGeometryColorHovered",value:function(){this.setGeometryColorSelected()}},{key:"setTextColorDefault",value:function(){this.text.fillColor=re.fromString(this.settings[it.GEOMETRY].text.color)}},{key:"setTextColorSelected",value:function(){this.text.fillColor=re.fromString(this.settings[it.GEOMETRY].text.selectionColor)}},{key:"setTextColorActiveSelected",value:function(){this.setTextColorSelected()}},{key:"setTextColorHovered",value:function(){this.setTextColorSelected()}},{key:"setIconColorDefault",value:function(){this.icon.fillColor=re.fromString(this.settings[it.GEOMETRY].icon.color)}},{key:"setIconColorSelected",value:function(){this.icon.fillColor=re.fromString(this.settings[it.GEOMETRY].icon.selectionColor)}},{key:"setIconColorActiveSelected",value:function(){this.setIconColorSelected()}},{key:"setIconColorHovered",value:function(){this.setIconColorSelected()}},{key:"setColorDefault",value:function(){this.setGeometryColorDefault(),this.setTextColorDefault(),this.setIconColorDefault()}},{key:"setColorSelected",value:function(){this.setGeometryColorSelected(),this.setTextColorSelected(),this.setIconColorSelected()}},{key:"setColorActiveSelected",value:function(){this.setGeometryColorActiveSelected(),this.setTextColorActiveSelected(),this.setIconColorActiveSelected()}},{key:"setColorHovered",value:function(){this.setGeometryColorHovered(),this.setTextColorHovered(),this.setIconColorHovered()}},{key:"toString",value:function(){var t="None";return this.parent instanceof e&&(t=this.parent.itemId),"".concat(this.itemId," (").concat(de.toDeg(this.angle),") | Parent: ").concat(t," | Root: ").concat(this.isRoot," | Pos: ").concat(this.position," | State: ").concat(this.state," | Children: ").concat(this.getChildren().length)}},{key:"toJSON",value:function(){return{id:this.itemId,text:this.textContent,icon:this.iconName.substring(2).toLowerCase(),direction:de.toDeg(this.angle),children:this.getChildren().reduce((function(t,e){return t.push(e.toJSON()),t}),[])}}},{key:"animateStateHidden",value:function(){var t;t=this.isRoot?{scaling:0}:{scaling:0,position:jt.subtract(this.position).add(this.position.multiply(this.settings[it.SCALES].dot))},this._animations.push(new Wt({target:this.geometryGroup,to:t}))}},{key:"animateStateActive",value:function(){var t=this;this._animations.push(new Wt({target:this.geometryGroup,to:{scaling:1}})),this._animations.onFinish$((function(){new Wt({target:t.arcGroup,from:{opacity:0},to:{opacity:1},options:{duration:t.settings[it.MAIN].animationDuration}}).start()}))}},{key:"animateStateChild",value:function(){this.geometryGroup.position=jt,this._animations.push(new Wt({target:this,from:{position:this.positionChild.normalize(this.settings[it.RADII].dot)},to:{position:this.positionChild}}),new Wt({target:this.geometryGroup,from:{scaling:this.settings[it.SCALES].dot},to:{scaling:this.settings[it.SCALES].child}}))}},{key:"animateStateParent",value:function(){this._animations.push(new Wt({target:this.geometryGroup,to:{scaling:this.settings[it.SCALES].parent}}))}},{key:"animateStateDot",value:function(){this.parent.state!==Q.PARENT?this._animations.push(new Wt({target:this,from:{position:this.parent.position},to:{position:this.positionDot}}),new Wt({target:this.geometryGroup,from:{position:jt.subtract(this.parent.position),scaling:0},to:{position:jt,scaling:this.settings[it.SCALES].dot}})):this._animations.push(new Wt({target:this,from:{position:this.position},to:{position:this.positionDot}}),new Wt({target:this.geometryGroup,to:{scaling:this.settings[it.SCALES].dot}}))}},{key:"animateStateBack",value:function(){var t=this;this._state=Q.CHILD;var e=this.parent,n=this.menu.inputPosition;e.isRoot||(n=this.root.position.add(e.globalToLocal(this.menu.inputPosition)).floor(),this.parent.parent.connector.strokeWidth=this.settings[it.CONNECTOR].width,this.parent.parent.connector.strokeColor=re.fromString(this.settings[it.CONNECTOR].color),this.parent.parent.geometry.opacity=1,this.parent.parent.getChildren().forEach((function(t){t.geometry.opacity=1}))),this._animations.easing="easeInCubic",this._animations.push(new Wt({target:this.root,to:{position:n}}),new Wt({target:this,to:{position:this.positionChild}}),new Wt({target:e.connector,to:{"lastSegment.point":jt}}),new Wt({target:this.geometryGroup,to:{scaling:this.settings[it.SCALES].child}})),this._animations.onStop$((function(){e.connector.lastSegment.point=jt,e.connector.strokeColor=re.fromString(t.settings[it.CONNECTOR].color),e.connector.strokeWidth=t.settings[it.CONNECTOR].width})),this._animations.onFinish$((function(){e.connector.visible=!1,e.connector.strokeColor=re.fromString(t.settings[it.CONNECTOR].color),e.connector.strokeWidth=t.settings[it.CONNECTOR].width}))}},{key:"animateStateBackChild",value:function(){this._state=Q.DOT,this._animations.push(new Wt({target:this,to:{position:this.position.normalize(this.settings[it.RADII].dot)}}),new Wt({target:this.geometryGroup,to:{scaling:this.settings[it.SCALES].dot}}))}},{key:"animateStateSubmenu",value:function(){var t=this;this._state=Q.PARENT;var n=this.globalToLocal(this.menu.inputPosition).floor(),i=this.activeChild;if(void 0===i)throw new Error("State is missing active Child");i.bringToFront();var o=Lt.clone();o.angleInRadians=i.angle-de.HALF_CIRCLE_RAD/2,o.x=Math.abs(o.x)<Number.EPSILON?0:o.x,o.y=Math.abs(o.y)<Number.EPSILON?0:o.y,o.length=n.multiply(o).length,o.length<this.settings[it.MAIN].minDistance&&(o.length=this.settings[it.MAIN].minDistance);var r=n.subtract(o);this._animations.push(new Wt({target:this.root,to:{position:this.root.position.add(r).floor()}}),new Wt({target:i,from:{position:i.position},to:{position:o}}),new Wt({target:this.connector,to:{"lastSegment.point":o}}),new Wt({target:this.geometryGroup,to:{scaling:this.settings[it.SCALES].parent}})),this._animations.onStop$((function(){t.connector.lastSegment.point=o})),this.state===Q.PARENT&&void 0!==this.activeChild&&this.parent instanceof e&&(this.parent.connector.strokeWidth=2,this.parent.connector.strokeColor=re.fromString("rgba(57,58,60,0.2)"),this.parent.geometry.opacity=.25,this.parent.getChildren().filter((function(e){return e!==t})).forEach((function(t){t.geometry.opacity=.25})))}},{key:"animateStateSelected",value:function(){var t=this;this.setColorSelected(),this.icon.opacity=e.ICON_BG_OPACITY,this._animations.push(new Wt({target:this.geometryGroup,from:{scaling:.9},to:{scaling:1.15}})),this._animations.onFinish$((function(){t.root.state=Q.HIDDEN,t.root.visible=!1}))}},{key:"animateStateActiveSelection",value:function(){var t=this;this.setColorActiveSelected(),this._animations.push(new Wt({target:this.geometryGroup,to:{scaling:1}})),this._animations.onFinish$((function(){new Wt({target:t.arcGroup,from:{opacity:0},to:{opacity:1},options:{duration:t.settings[it.MAIN].animationDuration}}).start()}))}},{key:"animateArcs",value:function(t){var e=this;this.arcGroup.children.forEach((function(n){de.between(t,n.data.from,n.data.to)&&(e.arcGroup.children.filter((function(t){return t!==n})).forEach((function(t){void 0!==t.data.fx&&t.data.fx.running&&t.data.fx.stop(),t.opacity=0})),n.opacity<1&&!n.data.fx.running&&(n.data.fx.initialize({target:n,to:{opacity:1},options:{duration:e.settings[it.MAIN].animationDuration,easing:"easeInCubic"}}),n.data.fx.start()))}))}},{key:"selection$",get:function(){return this._selectionObservable$}},{key:"menu",get:function(){if(void 0===this.root._menu)throw new Error("Events object missing on root");return this.root._menu},set:function(t){if(!this.isRoot)throw new Error("Events can only be set on root");this._menu=t}},{key:"settings",get:function(){if(void 0===this.root._settings)throw new Error("Settings object missing on root");return this.root._settings},set:function(t){if(!this.isRoot)throw new Error("Settings can only be set on root");this._settings=t}},{key:"state",get:function(){return this._state},set:function(t){if(this._state!==t){this.needsReDraw=!0;var e=Q.NONE;switch(this._state=t,t){case Q.HIDDEN:e=Q.HIDDEN;break;case Q.ACTIVE:e=Q.CHILD;break;case Q.SELECTED:this.selectedEvent();break;case Q.CHILD:e=Q.DOT;break;case Q.DOT:e=Q.HIDDEN;break;case Q.BACK:e=Q.BACK_CHILD;break;case Q.BACK_CHILD:e=Q.HIDDEN;break;case Q.SUBMENU:e=Q.DOT}e!==Q.NONE&&this.getChildren().forEach((function(t){t.state=e})),this.stateChanged()}}},{key:"isLeaf",get:function(){return 0===this.getChildren().length}},{key:"childCount",get:function(){return this.getChildren().reduce((function(t,e){return e.getChildren().length>0?t+e.childCount:t}),this.getChildren().length)}},{key:"iconName",set:function(t){void 0!==t&&(this._iconName=t)},get:function(){return this._iconName}},{key:"connector",get:function(){if(void 0===this._connector)throw new Error("Connector missing on ".concat(this.itemId));return this._connector}},{key:"inputAngle$",get:function(){if(void 0===this._inputAngle$)throw new Error("Mouse angle observable not initialized on ".concat(this.itemId));return this._inputAngle$}},{key:"root",get:function(){return this.isRoot?this:this.parent.root}},{key:"geometry",get:function(){if(void 0===this._geometry)throw new Error("Geometry missing on ".concat(this.itemId));return this._geometry}},{key:"icon",get:function(){if(void 0===this._icon)throw new Error("Icon missing on ".concat(this.itemId));return this._icon}},{key:"text",get:function(){if(void 0===this._text)throw new Error("Text missing on ".concat(this.itemId));return this._text}},{key:"positionChild",get:function(){if(void 0===this._positionChild)throw new Error("Child Position missing on ".concat(this.itemId));return this._positionChild}},{key:"positionDot",get:function(){if(void 0===this._positionDot)throw new Error("Dot Position missing on ".concat(this.itemId));return this._positionDot}},{key:"selectionRadius",get:function(){if(void 0===this._selectionRadius)throw new Error("Selection Radius not initialized on ".concat(this.itemId));return this._selectionRadius}}])&&Te(n.prototype,i),o&&Te(n,o),e}(function(t){function e(){return Ee(this,e),ke(this,Oe(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(e,paper.Group),n=e,(i=[{key:"hitTestAll",value:function(t,e){return[]}},{key:"hitTest",value:function(t,e){return new paper.HitResult}},{key:"hitTestChildren",value:function(){return null}},{key:"_hitTest",value:function(){return null}},{key:"_hitTestChildren",value:function(){return null}}])&&Se(n.prototype,i),o&&Se(n,o),e}());je(Le,"ICON_BG_OPACITY",.4),je(Le,"TEXT_OVERFLOW_SCALE",.8);var Ge=n(41),Me=n.n(Ge);function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t,e,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fe(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Fe(t){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ue=function(t){function e(t,n,i,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e){return!e||"object"!==Be(e)&&"function"!=typeof e?ze(t):e}(this,Fe(e).call(this,t,n,i,o)),Ye(ze(r),"TYPE","ribbonslider"),Ye(ze(r),"_ribbonGroup",void 0),Ye(ze(r),"_ribbon",void 0),Ye(ze(r),"_gradient",void 0),Ye(ze(r),"_grabDot",void 0),Ye(ze(r),"_ribbonMaskGroup",void 0),Ye(ze(r),"_configuration",void 0),Ye(ze(r),"_value",0),Ye(ze(r),"prevDragPosition",void 0),Ye(ze(r),"dragging",!1),Ye(ze(r),"childIndicator",void 0),Ye(ze(r),"done",!1),Ye(ze(r),"throttledTextUpdate",Me()(r.updateText,16,{leading:!0})),r}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(e,t),n=e,(i=[{key:"moveRibbonToValuePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t>this.configuration.max||t<this.configuration.min)throw RangeError("Slider (".concat(this.itemId,"): 'value' out of slider range"));var n=(t-this.configuration.min)/(this.configuration.max-this.configuration.min),i=-(Number.isNaN(n)?0:n*this.getRibbonLength());e?new Wt({target:this.ribbonGroup,to:{"position.x":i},options:{duration:this.settings[it.MAIN].animationDuration,easing:"easeInCubic"}}).start():this.ribbonGroup.position.x=i;var o=tt.SLIDER_VALUE_CHANGING;this.dragging||(o=tt.SLIDER_VALUE_FINAL),this.event(o,this,{value:t})}},{key:"toJSON",value:function(){var t=$e(Fe(e.prototype),"toJSON",this).call(this);return t.type=this.TYPE,t.data=this.configuration,delete t.children,t}},{key:"setupGeometry",value:function(){this._geometry=new paper.Path.Circle(jt,this.settings[it.GEOMETRY].size),this.setGeometryColorDefault(),this.geometry.strokeScaling=!1}},{key:"preSetup",value:function(){this.childIndicator=new paper.Path.Rectangle(jt,new paper.Point(.8*this.settings[it.RIBBONSLIDER].gradientLength,.8*this.settings[it.RIBBONSLIDER].ribbonHeight)),this.childIndicator.position=jt,this.childIndicator.strokeScaling=!1}},{key:"afterSetup",value:function(){this.setupGrabDotSymbol(),this.setupGradient(),this.setupRibbon()}},{key:"getNearestChild",value:function(){return this.hoveredChild=this,this}},{key:"traceLogic",value:function(){}},{key:"dragLogic",value:function(t){if(t.state===nt.END)return this.moveRibbonToValuePosition(this.value,!0),this.prevDragPosition=void 0,this.dragging=!1,this.ribbon.fillColor=re.fromString(this.settings[it.GEOMETRY].color),void this.event(tt.SLIDER_VALUE_FINAL,this,{value:this.value});this.dragging=!0,void 0===this.prevDragPosition&&(this.updateText(""+this.value),this.prevDragPosition=t.position),this.ribbon.fillColor=re.fromString(this.settings[it.GEOMETRY].selectionColor);var e=Math.abs(this.ribbonGroup.position.x)/(this.getRibbonLength()||1),n=this.configuration.precision*Math.round(e*(this.configuration.max-this.configuration.min)/this.configuration.precision)+this.configuration.min;n=function(t,e){if((""+t).includes("e")){var n=(""+t).split("e"),i="";return+n[1]+e>0&&(i="+"),+(Math.round(Number(+n[0]+"e"+i+(+n[1]+e)))+"e-"+e)}return+(Math.round(Number(t+"e+"+e))+"e-"+e)}(n,function(t){for(var e=1;Math.round(t*e)/e!==t;)e*=10;return Math.log(e)/Math.LN10}(this.configuration.precision)),this.value=Math.min(Math.max(n,this.configuration.min),this.configuration.max),this.inSnappingRange()?this.updateRibbonPosition(this.prevDragPosition.y-t.position.y):this.updateRibbonPosition(t.position.x-this.prevDragPosition.x),this.prevDragPosition=t.position}},{key:"clickLogic",value:function(t){this.hoveredChild=void 0,this.getPositionToTest()>this.settings[it.GEOMETRY].sizeDeadZone&&(this.done?(this.state=Q.SELECTED,this.root.redraw()):$e(Fe(e.prototype),"clickLogic",this).call(this,t))}},{key:"selectionLogic",value:function(t){this.dragging||(this.getPositionToTest()>this.settings[it.GEOMETRY].sizeDeadZone?$e(Fe(e.prototype),"selectionLogic",this).call(this,t):(this.updateText(""+this.value),this.arcGroup.children.forEach((function(t){void 0!==t.data.fx&&t.data.fx.running&&t.data.fx.stop(),t.opacity=0}))))}},{key:"getPositionToTest",value:function(){return this.inSnappingRange()?Math.abs(this.globalToLocal(this.menu.inputPosition).x):Math.abs(this.globalToLocal(this.menu.inputPosition).y)}},{key:"selectionLogicHoverOperations",value:function(){this.dragging||(this.updateText("Done"),this.done=!0)}},{key:"setGroupsVisibility",value:function(){$e(Fe(e.prototype),"setGroupsVisibility",this).call(this),this.text.visible=!0,this.icon.opacity=0,this.state!==Q.DOT&&this.state!==Q.BACK_CHILD||(this.text.visible=!1)}},{key:"animateStateActive",value:function(){$e(Fe(e.prototype),"animateStateActive",this).call(this),this.geometry.fillColor=re.fromString(this.settings[it.GEOMETRY].color)}},{key:"selectionLogicBackOperations",value:function(){this.dragging||($e(Fe(e.prototype),"selectionLogicBackOperations",this).call(this),this.done=!1)}},{key:"itemReady",value:function(){$e(Fe(e.prototype),"itemReady",this).call(this),this._ribbonMaskGroup=new paper.Group({children:[this.createMask(),this.ribbonGroup],blendMode:"source-over"}),this.ribbonMaskGroup.addChild(this.gradient),this.geometryGroup.addChild(this.ribbonMaskGroup),this.geometryGroup.addChild(this.childIndicator),this.inSnappingRange()&&(this.ribbonMaskGroup.pivot=jt,this.ribbonMaskGroup.rotate(-90)),this.text.bringToFront(),this.text.fontSize="20px",this.value=this.configuration.initial,this.moveRibbonToValuePosition(this.value),this.collectArcAngles(),this.createArcs()}},{key:"collectArcAngles",value:function(){var t=new Array,e=-1,n=de.toDeg(this.angle);n>45&&n<135&&(e=90),n>235&&n<315&&(e=270),de.between(n,315,45)?e=0:de.between(n,135,235)&&(e=180);var i=de.opposite(de.toRad(e));t.push(i),1===t.length&&t.push(de.toRad(e)),this.arcs=be.fromAngles(t),this.parentArc=this.arcs.find((function(t){return t.origAngle===i}))}},{key:"stateChanged",value:function(){$e(Fe(e.prototype),"stateChanged",this).call(this),this.state===Q.ACTIVE?(this.updateText(""+this.value),this.moveRibbonToValuePosition(this.value),this.ribbonMaskGroup.visible=!0,this.childIndicator.visible=!1,this.gradient.visible=!0):this.state===Q.SELECTED||(this.ribbonMaskGroup.visible=!1,this.childIndicator.visible=!0,this.gradient.visible=!1,this.updateText(""+this.value)),this.state!==Q.DOT&&this.state!==Q.BACK_CHILD||(this.childIndicator.visible=!1)}},{key:"selectionLogicInGeometryOperations",value:function(){}},{key:"setGeometryColorDefault",value:function(){$e(Fe(e.prototype),"setGeometryColorDefault",this).call(this),this.childIndicator.fillColor=re.fromString(this.settings[it.GEOMETRY].color)}},{key:"setGeometryColorSelected",value:function(){this.childIndicator.fillColor=re.fromString(this.settings[it.GEOMETRY].selectionColor)}},{key:"getChildren",value:function(){return[]}},{key:"inSnappingRange",value:function(){var t=de.toDeg(this.angle);return t>45&&t<135||t>235&&t<315}},{key:"setupRibbon",value:function(){var t=this;this._ribbonGroup=new paper.Group({blendMode:"source-in"}),this._ribbon=new paper.Path.Rectangle(jt,new paper.Point(this.getRibbonLength()+this.settings[it.RIBBONSLIDER].gradientLength,this.settings[it.RIBBONSLIDER].ribbonHeight)),this.ribbonGroup.addChild(this.ribbon),this.ribbonGroup.pivot=this.ribbonGroup.bounds.leftCenter.add(new paper.Point(this.settings[it.RIBBONSLIDER].gradientLength/2,0)),this.ribbonGroup.position=jt,this.ribbon.onMouseEnter=function(){t.menu.canvas.style.cursor="ew-resize"},this.ribbon.onMouseLeave=function(){t.menu.canvas.style.cursor="default"},this.setupRibbonContent()}},{key:"setupRibbonContent",value:function(){for(var t=this,e=function(){t.menu.canvas.style.cursor="ew-resize"},n=function(e){t.value=e.target.data.value,t.moveRibbonToValuePosition(t.value,!0)},i=0;i<=this.getRibbonLength()/(this.configuration.stepDist/2);i++){var o=new paper.Point(i*(this.configuration.stepDist/2)+this.settings[it.RIBBONSLIDER].gradientLength/2,this.settings[it.RIBBONSLIDER].ribbonHeight/2);if(i%2==0){var r=this.text.clone();this.inSnappingRange()&&r.rotate(90);var s=Math.round(100*(this.configuration.min+i*this.getPrecision()/2))/100;r.position=o,r.content=""+s,r.data.value=s,r.onMouseLeave=function(e){t.menu.canvas.style.cursor="default",e.target.fillColor=re.fromString(t.settings[it.GEOMETRY].text.color)},r.onClick=n,this.ribbonGroup.addChild(r)}else{var a=this.grabDot.place(o);a.onMouseEnter=e,this.ribbonGroup.addChild(a)}}}},{key:"setupGradient",value:function(){this._gradient=new paper.Path.Rectangle(jt,new paper.Point(this.settings[it.RIBBONSLIDER].gradientLength,this.settings[it.RIBBONSLIDER].ribbonHeight-this.settings[it.GEOMETRY].stroke.width)),this.gradient.bounds.center=jt,this.gradient.strokeWidth=0;var t=re.fromArray([this.settings[it.RIBBONSLIDER].gradientColorSides,[this.settings[it.RIBBONSLIDER].gradientColor,.3],[this.settings[it.RIBBONSLIDER].gradientColor,.7],this.settings[it.RIBBONSLIDER].gradientColorSides]);this.gradient.fillColor=new paper.Color(t,this.gradient.bounds.leftCenter,this.gradient.bounds.rightCenter)}},{key:"setupGrabDotSymbol",value:function(){var t=new paper.Group,e=Array(),n=new paper.Path.Circle(jt,3);n.fillColor=re.fromString(this.settings[it.GEOMETRY].stroke.color),n.strokeWidth=0;for(var i=0;i<3;i++){for(var o=0;o<2;o++){var r=n.clone();r.position=jt.add(new paper.Point(10*o,10*i)),e.push(r)}t.addChildren(e),e.length=0}t.pivot=t.bounds.center,this._grabDot=new paper.SymbolDefinition(t)}},{key:"createMask",value:function(){var t=new paper.Path.Rectangle(jt,new paper.Point(this.menu.canvas.width*this.settings[it.RIBBONSLIDER].maskLengthMultiplier,this.settings[it.RIBBONSLIDER].ribbonHeight+2));t.bounds.center=jt,t.strokeWidth=0;var e=re.fromArray(["rgba(0, 0, 0, 0)",["#000",this.settings[it.RIBBONSLIDER].maskStart],["#000",1-this.settings[it.RIBBONSLIDER].maskStart],"rgba(0, 0, 0, 0)"]);return t.fillColor=new paper.Color(e,t.bounds.leftCenter,t.bounds.rightCenter),t}},{key:"getRibbonLength",value:function(){return(this.configuration.max-this.configuration.min)/this.getPrecision()*this.configuration.stepDist}},{key:"getPrecision",value:function(){return void 0!==this.configuration.stepSize?this.configuration.stepSize:this.configuration.precision}},{key:"updateRibbonPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;t>=0?n=this.ribbonGroup.bounds.leftCenter.x+this.settings[it.RIBBONSLIDER].gradientLength/2+t<=0?this.ribbonGroup.position.x+t:0:t<0&&(n=this.ribbonGroup.bounds.rightCenter.x-this.settings[it.RIBBONSLIDER].gradientLength/2+t>=0?this.ribbonGroup.position.x+t:-this.getRibbonLength()),e?new Wt({target:this.ribbonGroup,to:{"position.x":n},options:{duration:this.settings[it.MAIN].animationDuration,easing:"easeOutCubic"}}).start():this.ribbonGroup.position.x=n,this.event(tt.SLIDER_VALUE_CHANGING,this,{value:this.value})}},{key:"isLeaf",get:function(){return!1}},{key:"configuration",get:function(){if(void 0===this._configuration)throw new Error("Slider (".concat(this.itemId,"): configuration not set"));return this._configuration}},{key:"data",set:function(t){var e=Be(t.min),n=Be(t.max),i=Be(t.initial),o=Be(t.stepSize),r=Be(t.stepDist);if("undefined"===e||"undefined"===n)throw new Error("Slider (".concat(this.itemId,"): configuration is missing 'min' and/or 'max' value"));if("number"!==e||"number"!==n)throw new Error("Slider (".concat(this.itemId,"): min/max values have to be of type number"));if(t.min>t.max||t.min===t.max)throw new Error("Slider (".concat(this.itemId,"): 'min' value is greater than or equal to 'max' value"));if("undefined"!==i&&(t.initial<t.min||t.initial>t.max))throw new Error("Slider (".concat(this.itemId,"): 'initial' value is not in min/max range"));if("undefined"===i&&(t.initial=t.min),0!==Math.floor(t.initial%t.precision))throw new Error("Slider (".concat(this.itemId,"): 'initial' is not achievable with 'precision'"));if("undefined"===o)t.stepSize=1;else if(t.max-t.min<=t.stepSize)throw new Error("Slider (".concat(this.itemId,"): 'stepSize' is greater or equal to slider range"));"undefined"===r&&(t.stepDist=100),this._configuration=t}},{key:"value",set:function(t){this._value!==t&&(this._value=t,this.throttledTextUpdate(""+t))},get:function(){return this._value}},{key:"ribbonGroup",get:function(){if(void 0===this._ribbonGroup)throw new Error("Ribbon group not initialized");return this._ribbonGroup}},{key:"ribbon",get:function(){if(void 0===this._ribbon)throw new Error("Ribbon not initialized");return this._ribbon}},{key:"grabDot",get:function(){if(void 0===this._grabDot)throw new Error("Grab Dot Group not initialized");return this._grabDot}},{key:"gradient",get:function(){if(void 0===this._gradient)throw new Error("Gradient not initialized");return this._gradient}},{key:"ribbonMaskGroup",get:function(){if(void 0===this._ribbonMaskGroup)throw new Error("Ribbon Mask Group not initialized");return this._ribbonMaskGroup}}])&&He(n.prototype,i),o&&He(n,o),e}(Le);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qe(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?Je(t):e}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t,e,n){return(Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qe(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){return(tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nn=function(t){function e(){var t,n;We(this,e);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return en(Je(n=qe(this,(t=Qe(e)).call.apply(t,[this].concat(o)))),"TYPE","checkbox"),en(Je(n),"itemSelected",!1),n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tn(t,e)}(e,t),n=e,(i=[{key:"deselect",value:function(){this.itemSelected=!1}},{key:"select",value:function(){this.itemSelected=!0}},{key:"isSelected",value:function(){return this.itemSelected}},{key:"toJSON",value:function(){var t=Ze(Qe(e.prototype),"toJSON",this).call(this);return t.type=this.TYPE,t.data={selected:this.itemSelected},delete t.children,t}},{key:"setGeometryColorDefault",value:function(){this.setGeometryColorSelected()}},{key:"setGeometryColorSelected",value:function(){this.itemSelected?this.geometry.fillColor=re.fromString(this.settings[it.CHECKBOX].selectionColor):Ze(Qe(e.prototype),"setGeometryColorDefault",this).call(this)}},{key:"setGeometryColorActiveSelected",value:function(){this.itemSelected?Ze(Qe(e.prototype),"setGeometryColorDefault",this).call(this):this.geometry.fillColor=re.fromString(this.settings[it.CHECKBOX].selectionColor)}},{key:"setGeometryColorHovered",value:function(){this.itemSelected?this.geometry.fillColor=re.fromString(this.settings[it.CHECKBOX].selectionColorSelected):Ze(Qe(e.prototype),"setGeometryColorSelected",this).call(this)}},{key:"selectedEvent",value:function(){this.itemSelected=!this.itemSelected,this.event(tt.SELECTION,this,{selected:this.itemSelected})}},{key:"setupGeometry",value:function(){var t=1.75*this.settings[it.GEOMETRY].size,e=new paper.Rectangle(jt,new paper.Size(t,t));e.center=jt;var n=this.settings[it.CHECKBOX].cornerRadius,i=new paper.Size(n,n);this._geometry=new paper.Path.Rectangle(e,i),this.setGeometryColorDefault(),this.geometry.strokeScaling=!1}},{key:"data",set:function(t){"boolean"==typeof t.selected&&(this.itemSelected=t.selected)}}])&&Xe(n.prototype,i),o&&Xe(n,o),e}(Le);function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function an(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?cn(t):e}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t,e,n){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hn(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e){return(ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pn=function(t){function e(){var t,n;rn(this,e);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return fn(cn(n=an(this,(t=hn(e)).call.apply(t,[this].concat(o)))),"TYPE","radiogroup"),n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(e,t),n=e,(i=[{key:"select",value:function(t){var e=this.getChildren().find((function(e){return e.itemId===t}));void 0!==e&&(this.deselectChildren(),e.select())}},{key:"toJSON",value:function(){var t=un(hn(e.prototype),"toJSON",this).call(this);return t.type=this.TYPE,t}},{key:"changeActive",value:function(){this.state===Q.ACTIVE&&(this.deselectChildren(),this.activeChild=this.getNearestChild(this.angleToReferencePoint(this.menu.inputPosition)),this.state=Q.SUBMENU,this.menu.trace$.reset(),this.activeChild.isLeaf&&(this.menu.markingMode?(this.activeChild.state=Q.ACTIVE_SELECTION,this.event(tt.HOVER_SELECTION,this.activeChild)):(this.activeChild.state=Q.SELECTED,this.activeChild.select())),this.root.redraw())}},{key:"deselectChildren",value:function(){this.getChildren().forEach((function(t){t.deselect()}))}}])&&sn(n.prototype,i),o&&sn(n,o),e}(Le);function dn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vn(this,"_itemIds",new Map),vn(this,"_duplicateIds",new Set)}var e,n,i;return e=t,i=[{key:"checkAngles",value:function(t){if(null!==t.parent&&null!==t.parent.parent){var e=t.parent.angle,n=de.opposite(t.angle);Math.abs(e-n)<Number.EPSILON&&console.error("Item angle clashes with back angle! Item: ".concat(t.itemId," (").concat(de.toDeg(t.angle),") | Parent: ").concat(t.parent.itemId," (").concat(de.toDeg(e),")"))}}}],(n=[{key:"parse",value:function(e){var n,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.checkIds(e.id),null===o?n=new Le(e.id,e.direction,e.text,e.icon,!0):(o instanceof pn&&(e.type="checkbox"),n=this.parseItem(e),o.addChild(n),t.checkAngles(n)),this.map.set(e.id,n),e.children&&e.children.forEach((function(t){i.parse(t,n)})),n}},{key:"parseItem",value:function(t){var e;switch(t.type){case"slider":case"ribbonslider":e=new Ue(t.id,t.direction,t.text,t.icon);break;case"checkbox":e=new nn(t.id,t.direction,t.text,t.icon);break;case"radiogroup":case"radio-group":e=new pn(t.id,t.direction,t.text,t.icon);break;default:e=new Le(t.id,t.direction,t.text,t.icon)}return void 0!==t.data&&(e.data=t.data),e}},{key:"hasDuplicateIds",value:function(){return this._duplicateIds.size>0}},{key:"checkIds",value:function(t){this.map.has(t)&&(this._duplicateIds.add(t),console.warn("Menu Item ID '".concat(t,"' already in use.")))}},{key:"map",get:function(){return this._itemIds}},{key:"duplicateIds",get:function(){return Array.from(this._duplicateIds.values())}}])&&dn(e.prototype,n),i&&dn(e,i),t}();n.d(e,"menu",(function(){return ue})),n.d(e,"parser",(function(){return bn}))}])}));